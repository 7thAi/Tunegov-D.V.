<Page x:Class="WpfApp1.Pages.UserPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Пользователи">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Панель поиска / фильтра -->
        <WrapPanel Grid.Row="0" Margin="0 0 0 10">

            <StackPanel Margin="5">
                <TextBlock Text="Поиск по ФИО"/>
                <TextBox x:Name="TextBoxSearch"
                         Width="200"
                         ToolTip="Введите ФИО пользователя"
                         TextChanged="TextBoxSearch_TextChanged"/>
            </StackPanel>

            <StackPanel Margin="5">
                <TextBlock Text="Сортировка"/>
                <ComboBox x:Name="CmbSorting"
                          Width="180"
                          SelectionChanged="CmbSorting_SelectionChanged">
                    <ComboBoxItem Content="По возрастанию"/>
                    <ComboBoxItem Content="По убыванию"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Margin="5" VerticalAlignment="Bottom">
                <CheckBox x:Name="CheckUser"
                          Content="Только пользователи"
                          ToolTip="Показать только пользователей"
                          Checked="CheckUser_Changed"
                          Unchecked="CheckUser_Changed"/>
            </StackPanel>

            <Button Content="Очистить фильтр"
                    Margin="10 0 0 0"
                    VerticalAlignment="Bottom"
                    Click="BtnClear_Click"/>
        </WrapPanel>

        <!-- Плитки -->
        <ScrollViewer Grid.Row="1">
            <ListView x:Name="ListUser">

                <ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ListView.ItemsPanel>

                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#4A90E2"
                                BorderThickness="2"
                                CornerRadius="10"
                                Padding="10"
                                Margin="10"
                                Width="200">

                            <StackPanel>

                                <Image Height="100"
                                       Stretch="UniformToFill"
                                       Source="{Binding Photo,
                                                TargetNullValue='pack://application:,,,/Resources/DefaultPhoto.png'}"/>

                                <TextBlock Text="{Binding FIO}"
                                           FontWeight="Bold"
                                           HorizontalAlignment="Center"
                                           Margin="0 5 0 0"/>

                                <TextBlock Text="{Binding Role}"
                                           HorizontalAlignment="Center"/>

                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>

            </ListView>
        </ScrollViewer>
    </Grid>
</Page>
